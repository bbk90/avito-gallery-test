(this["webpackJsonpavito-gallery"]=this["webpackJsonpavito-gallery"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(6),s=n.n(a),r=n(2),o=n(3),l=n.n(o),i=n(4),u=n(7),j=function e(){var t=this;Object(u.a)(this,e),this._baseUrl="https://boiling-refuge-66454.herokuapp.com",this.getAllImages=Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._baseUrl,"/images"));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)}))),this.getExtraData=function(){var e=Object(i.a)(l.a.mark((function e(n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._baseUrl,"/images/").concat(n));case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addComment=function(){var e=Object(i.a)(l.a.mark((function e(n,c){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._baseUrl,"/images/").concat(n,"/comments"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},d=(n(14),n(0)),b=function(){return Object(d.jsx)("footer",{className:"app-footer",children:Object(d.jsx)("p",{children:"\u24b8 2021"})})},O=n(8),h=(n(16),function(e){var t=e.url,n=e.id,c=e.choosePhotoHandler;return Object(d.jsx)("li",{onClick:function(){return c(n)},className:"gallery-item",children:Object(d.jsx)("img",{src:t,alt:""})})}),m=(n(17),function(e){var t=e.photos,n=e.choosePhotoHandler;return Object(d.jsx)("ul",{className:"gallery",children:t.map((function(e){return Object(d.jsx)(h,Object(O.a)({url:e.url,choosePhotoHandler:n},e),e.id)}))})}),f=(n(18),function(){return Object(d.jsxs)("div",{className:"lds-ring",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})}),p=(n(19),function(e){var t=e.id,n=e.closeModal,a=new j,s=Object(c.useState)(null),o=Object(r.a)(s,2),l=o[0],i=o[1],u=Object(c.useState)(null),b=Object(r.a)(u,2),O=b[0],h=b[1],m=Object(c.useState)(!0),p=Object(r.a)(m,2),x=p[0],v=p[1],g=Object(c.useState)(""),N=Object(r.a)(g,2),S=N[0],y=N[1],w=Object(c.useState)(""),k=Object(r.a)(w,2),C=k[0],P=k[1];Object(c.useEffect)((function(){a.getExtraData(t).then((function(e){i(e.url),h(e.comments),v(!1)}))}),[t]);var E=x?Object(d.jsx)(f,{}):null,T=x?null:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"modal-leftside",children:[Object(d.jsx)("img",{src:l,alt:""}),Object(d.jsxs)("form",{className:"modal-form",onSubmit:function(e){S&&""!==C?(a.addComment(t,{comment:C,name:S}).then((function(e){204===e.status?alert("\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d"):alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d!")})),y(""),P("")):alert("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f!"),e.preventDefault()},children:[Object(d.jsx)("input",{value:S,onChange:function(e){y(e.target.value)},placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",type:"text"}),Object(d.jsx)("input",{value:C,onChange:function(e){P(e.target.value)},placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",type:"text"}),Object(d.jsx)("button",{type:"submit",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})]})]}),Object(d.jsx)("div",{className:"modal-rightside",children:O?Object(d.jsx)("div",{className:"modal-comments",children:O.map((function(e){return Object(d.jsxs)("div",{className:"modal-comment",children:[Object(d.jsx)("span",{children:(""+new Date(e.date).toISOString()).replace(/^([^T]+)T(.+)$/,"$1").replace(/^(\d+)-(\d+)-(\d+)$/,"$3.$2.$1")}),Object(d.jsx)("p",{children:e.text})]},e.id)}))}):null})]});return Object(d.jsx)("div",{className:"modal",children:Object(d.jsx)("div",{className:"modal-dialog",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsx)("div",{className:"modal-header",children:Object(d.jsx)("button",{onClick:n,className:"close",children:"\xd7"})}),Object(d.jsxs)("div",{className:"modal-body",children:[E,T]})]})})})}),x=(n(20),function(){var e=new j,t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],s=n[1],o=Object(c.useState)(!0),l=Object(r.a)(o,2),i=l[0],u=l[1],O=Object(c.useState)(!1),h=Object(r.a)(O,2),x=h[0],v=h[1],g=Object(c.useState)(null),N=Object(r.a)(g,2),S=N[0],y=N[1];Object(c.useEffect)((function(){e.getAllImages().then((function(e){s(e),u(!1)}))}),[]);var w=i?Object(d.jsx)(f,{}):null,k=i?null:Object(d.jsx)(m,{photos:a,choosePhotoHandler:function(e){y(e),v(!0)}}),C=x?Object(d.jsx)(p,{photos:a,id:S,closeModal:function(){v(!1)}}):null;return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)("h1",{children:"TEST APP"}),w,k,C,Object(d.jsx)(b,{})]})});n(21);s.a.render(Object(d.jsx)(x,{}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.86c5b910.chunk.js.map